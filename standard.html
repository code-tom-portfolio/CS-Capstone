<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>



    <!-- 3 files below are for the use of bootstrap formatting-->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>



    <!-- html index file for project-->
    <title>Max Fantasy</title>

    <style>
        body {
            padding: 1em;
            text-align: center;
            background-color: lightskyblue;
        }

        a {
            color: blue;
            font-weight: bold;
        }

        a:hover {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">Max Fantasy</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="index.html">Home</a></li>
                <li><a href="/">MyTeam</a></li>
                <li><a href="/">About</a></li>
                <li><a href="/">Privacy</a></li>
            </ul>
        </div>
    </nav>
    <h1>Max Fantasy</h1>
    <h3>Standard League</h3>
    <p>Please pick players from drop downs to fill your team</p>
    <br />

    <!-- QB drop down-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">QB:</p>
        <select id="QB" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!-- RB drop downs-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">RB:</p>
        <select id="RB1" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">RB:</p>
        <select id="RB2" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!-- WR drop downs-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">WR:</p>
        <select id="WR1" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">WR:</p>
        <select id="WR2" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!-- TE drop down-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">TE:</p>
        <select id="TE" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!--FLEX drop down-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">FLEX:</p>
        <select id="FLEX" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!--Defense drop down-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">DEFENSE:</p>
        <select id="DEFENSE" class="col-sm-4" onchange="return handleChange()">
            <option>Bills</option>
            <option>Ravens</option>
        </select>
    </div>

    <!--Kicker drop down-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">K:</p>
        <select id="K" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <!-- Bench drop downs-->
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH1" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH2" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH3" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH4" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH5" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH6" class="col-sm-4" onchange="return handleChange()"></select>
    </div>
    <div class="row">
        <p class="col-sm-2"></p>
        <p class="col-sm-2">BENCH:</p>
        <select id="BENCH7" class="col-sm-4" onchange="return handleChange()"></select>
    </div>

    <button id="btnSave" class="btn btn-primary" type="button" onclick="return submitTeam()">Save Team</button>
    <button id="btnUpdate" class="btn btn-success" type="button" onclick="return update()">Update Team</button>

    <br /><br />
    <div id="result"></div>

    <script>
        // fetch json
        fetch('dummyJSON.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                myJSON = data;

                // load drop downs with proper players in position

                // qb select
                let qbSelect = document.getElementById("QB");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "QB") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        qbSelect.add(myOption, null);
                    }
                });

                //rb selects
                let rbSelect = document.getElementById("RB1");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "RB") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        rbSelect.add(myOption, null);
                    }
                });
                let rb2Select = document.getElementById("RB2");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "RB") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        rb2Select.add(myOption, null);
                    }
                });

                // wr selects
                let wrSelect = document.getElementById("WR1");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "WR") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        wrSelect.add(myOption, null);
                    }
                });
                let wr2Select = document.getElementById("WR2");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "WR") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        wr2Select.add(myOption, null);
                    }
                });

                // te select
                let teSelect = document.getElementById("TE");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "TE") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        teSelect.add(myOption, null);
                    }
                });

                // FLEX select
                let flexSelect = document.getElementById("FLEX");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "RB" || obj.player_pos == "WR" || obj.player_pos == "TE") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        flexSelect.add(myOption, null);
                    }
                });

                // Kicker select
                let kSelect = document.getElementById("K");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    if (obj.player_pos == "K") {
                        myOption.text = obj.player_name;
                        myOption.value = obj.player_name;
                        kSelect.add(myOption, null);
                    }
                });


                // BENCH selects
                let b1Select = document.getElementById("BENCH1");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b1Select.add(myOption, null);
                });
                let b2Select = document.getElementById("BENCH2");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b2Select.add(myOption, null);
                });
                let b3Select = document.getElementById("BENCH3");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b3Select.add(myOption, null);
                });
                let b4Select = document.getElementById("BENCH4");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b4Select.add(myOption, null);
                });
                let b5Select = document.getElementById("BENCH5");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b5Select.add(myOption, null);
                });
                let b6Select = document.getElementById("BENCH6");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b6Select.add(myOption, null);
                });
                let b7Select = document.getElementById("BENCH7");
                myJSON.map(function (obj, i) {
                    let myOption = document.createElement("option");
                    myOption.text = obj.player_name;
                    myOption.value = obj.player_name;
                    b7Select.add(myOption, null);
                });

            })
            .catch(function (error) {
                console.log(error);
            }) // end of fetching

        let teamSlots = ["QB", "RB1", "RB2", "WR1", "WR2", "TE", "FLEX", "DEFENSE", "K", "BENCH1", "BENCH2", "BENCH3", "BENCH4", "BENCH5", "BENCH6", "BENCH7"];

        function submitTeam() {
            let team = [];
            
            
            for(let i = 0; i < teamSlots.length; i++){
                let checking = document.getElementById(teamSlots[i]).value;
                if(team.indexOf(checking)==-1){
                    team.push(document.getElementById(teamSlots[i]).value);
                }else{
                    alert("Players can only be used once in the team");
                    return;
                }
            }

            for(let i = 0; i < teamSlots.length; i++){
                document.getElementById(teamSlots[i]).disabled = true;
            }

            document.getElementById("result").innerHTML = team.join("<br/>");

        }
        function handleChange() {
            document.getElementById("result").innerHTML = "";
            for(let i = 0; i < teamSlots.length; i++){
                document.getElementById(teamSlots[i]).disabled = false;
            }
        }

        function update() {
            document.getElementById("result").innerHTML = "";
            for(let i = 0; i < teamSlots.length; i++){
                document.getElementById(teamSlots[i]).disabled = false;
            }
        }
    </script>

</body>

</html>